<!doctype html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org" th:replace="base :: html">

<div th:fragment="content">

    <main class="py-5">
        <div class="container">
            <h1 class="mb-5 text-center">Modifier un produit</h1>

            <form th:object="${produit}"
                  th:action="@{/admin/produits/edit/{id}(id=${produit.id})}"
                  method="post"
                  enctype="multipart/form-data"
                  class="w-75 mx-auto">

                <!-- NOM -->
                <div class="mb-3">
                    <label class="form-label">Nom</label>
                    <input type="text" th:field="*{nom}" class="form-control" required>
                </div>

                <!-- DESCRIPTION -->
                <div class="mb-3">
                    <label class="form-label">Description</label>
                    <textarea th:field="*{description}" class="form-control" required></textarea>
                </div>

                <!-- PRIX -->
                <div class="mb-3">
                    <label class="form-label">Prix (€)</label>
                    <input type="number" step="0.01" th:field="*{prix}" class="form-control" required>
                </div>

                <!-- STOCK -->
                <div class="mb-3">
                    <label class="form-label">Stock</label>
                    <input type="number" th:field="*{stock}" class="form-control" required>
                </div>

                <!-- IMAGE ACTUELLE -->
                <div class="mb-3">
                    <label class="form-label">Image actuelle</label><br>
                    <img th:if="${produit.imagePath != null}"
                         th:src="${produit.imagePath}"
                         alt="Image du produit"
                         style="max-height: 150px;">
                </div>

                <!-- NOUVELLE IMAGE -->
                <div class="mb-3">
                    <label class="form-label">Nouvelle image (optionnel)</label>
                    <input type="file" name="imageFile" class="form-control">
                </div>

                <!-- CATEGORIE -->
                <div class="mb-3">
                    <label class="form-label">Catégorie</label>
                    <select th:field="*{categorie.id}" class="form-control" required>
                        <option th:each="c : ${categories}"
                                th:value="${c.id}"
                                th:text="${c.nom}">
                        </option>
                    </select>
                </div>

                <button class="btn btn-primary w-100 mt-4">Modifier</button>
            </form>

            <div class="mt-3">
                <a th:href="@{/admin/produits}" class="btn btn-secondary">← Retour</a>
            </div>

        </div>
    </main>

</div>
</html>
